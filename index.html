<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Video Downloader - Yogaasz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: { colors: { primary: '#22d3ee', dark: '#0f172a' } }
      }
    }
  </script>
</head>
<body class="bg-dark text-white min-h-screen flex flex-col items-center justify-center p-4">

  <div class="w-full max-w-md bg-gray-800 rounded-2xl shadow-lg p-6 text-center">
    <h1 class="text-2xl font-bold mb-2 text-primary">Instagram Video Downloader</h1>
    <p class="text-gray-400 text-sm mb-4">by Yogaasz</p>

    <input id="url" type="text" placeholder="Masukkan URL video Instagram..."
      class="w-full p-3 rounded-lg bg-gray-700 text-white outline-none focus:ring-2 focus:ring-primary mb-3">

    <button id="downloadBtn"
      class="w-full bg-primary hover:bg-cyan-400 text-dark font-semibold py-2 rounded-lg transition-all">
      Download Sekarang
    </button>

    <div id="result" class="mt-6 hidden">
      <img id="thumb" src="" alt="Thumbnail"
        class="rounded-xl shadow-md w-full mb-4 border border-gray-700">
      <a id="link" href="#" target="_blank"
        class="inline-block bg-green-500 hover:bg-green-400 text-white font-semibold px-4 py-2 rounded-lg">
        ⬇️ Download Video
      </a>
    </div>

    <p id="error" class="text-red-400 text-sm mt-3 hidden"></p>
  </div>

  <footer class="mt-6 text-gray-500 text-xs text-center">
    © 2025 <a href="https://yoganugroho.web.id" class="text-primary hover:underline">Yogaasz</a> - All Rights Reserved
  </footer>

  <script>
    const btn = document.getElementById("downloadBtn");
    const result = document.getElementById("result");
    const thumb = document.getElementById("thumb");
    const link = document.getElementById("link");
    const error = document.getElementById("error");

    btn.addEventListener("click", async () => {
      const url = document.getElementById("url").value.trim();
      if (!url) {
        error.textContent = "Masukkan URL terlebih dahulu.";
        error.classList.remove("hidden");
        return;
      }

      error.classList.add("hidden");
      btn.textContent = "Sedang memproses...";
      btn.disabled = true;

      try {
        const res = await fetch(`/api/download?url=${encodeURIComponent(url)}`);
        const data = await res.json();

        if (data.status && data.result.length > 0) {
          const v = data.result[0];
          thumb.src = v.thumbnail;
          link.href = v.url_download;
          result.classList.remove("hidden");
        } else {
          throw new Error("Video tidak ditemukan atau API error.");
        }
      } catch (err) {
        error.textContent = err.message;
        error.classList.remove("hidden");
      } finally {
        btn.textContent = "Download Sekarang";
        btn.disabled = false;
      }
    });
  </script>
</body>
  </html>
  
